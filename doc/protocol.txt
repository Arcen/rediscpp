* redis protocol

http://redis.io/topics/protocol

* memo for japanease

* ネットワーク層
各コマンドはCRLFで終端している

* リクエスト
新しいプロトコル用に下記の形式が取れる
	*引数の数CRLF($データ長CRLFデータCRLF){引数の数の繰り返し}

* レスポンス
最初のバイトで種類を特定することができる
+状態応答
	+OKCRLFなど
-エラー応答
	-ERR unknown command 'foobar'CRLFなど
:整数値応答
	int64_tの範囲
	:0CRLF
$バルク応答
	512MB最大
	$データ長CRLFデータCRLF
	データなし(NULL)の表現は
		$-1CRLF
*マルチバルク応答
	リクエストと同様
	空(*0CRLF)とNULL(*-1CRLF)は異なる

* 複数コマンド
	サーバのレスポンスを読まなくても、連続して応答を返すようになっている

* インラインコマンド
	空白区切りでコマンドを渡す
	バイナリセーフではない

* バルクコマンド
	最後の引数に整数値を持ち、次の行でデータを送る
	コマンド 引数 最後の引数の長さCRLF最後のデータCRLF
	各コマンドごとにインラインかバルクのどちらを使えるかが決まっている
